(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();class a{constructor(e){this.parent=e}getHTML(e){return`
                <div class="card">
                    <div class="card-body">
                    <button class="btn btn-primary" id="click-card-${e.id}" data-id="${e.id}">Подробнее</button>
                    <button class="btn btn-primary" id="delete-card-${e.id}" data-id="${e.id}">✕</button>
                        <h1 class="card-title">${e.title}</h1>
                        <p class="card-text">${e.text.length>90?e.text.substring(0,90)+"...":e.text}</p>
                        
                    </div>
                    <img class="card-img-top" src="${e.src}" alt="картинка">
                </div>
            `}addListeners(e,n,t){document.getElementById(`click-card-${e.id}`).addEventListener("click",n),document.getElementById(`delete-card-${e.id}`).addEventListener("click",t)}render(e,n,t){const s=this.getHTML(e);this.parent.insertAdjacentHTML("beforeend",s),this.addListeners(e,n,t)}}class u{constructor(e){this.parent=e}addListeners(e){document.getElementById("back-button").addEventListener("click",e)}getHTML(){return`
                <button id="back-button" class="btn btn-primary" type="button">Назад</button>
            `}render(e){const n=this.getHTML();this.parent.insertAdjacentHTML("beforeend",n),this.addListeners(e)}}class p{get(e,n){const t=new XMLHttpRequest;t.open("GET",e),t.send(),t.onreadystatechange=()=>{t.readyState===4&&this._handleResponse(t,n)}}post(e,n,t){const s=new XMLHttpRequest;s.open("POST",e),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(n)),s.onreadystatechange=()=>{s.readyState===4&&this._handleResponse(s,t)}}patch(e,n,t){const s=new XMLHttpRequest;s.open("PATCH",e),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(n)),s.onreadystatechange=()=>{s.readyState===4&&this._handleResponse(s,t)}}delete(e,n){const t=new XMLHttpRequest;t.open("DELETE",e),t.send(),t.onreadystatechange=()=>{t.readyState===4&&this._handleResponse(t,n)}}_handleResponse(e,n){try{const t=e.responseText?JSON.parse(e.responseText):null;n(t,e.status)}catch(t){console.error("Ошибка парсинга JSON:",t),n(null,e.status)}}}const c=new p;class f{constructor(){this.baseUrl="http://localhost:3000"}getNews(){return`${this.baseUrl}/news`}getNewById(e){return`${this.baseUrl}/news/${e}`}createNew(){return`${this.baseUrl}/news`}removeNewById(){return`${this.baseUrl}/news/${id}`}updateNewById(){return`${this.baseUrl}/news/${id}`}}const d=new f;class g{constructor(e,n,t,s,r){this.parent=e,this.id=n,this.src=t,this.title=s,this.text=r}getData(){c.get(d.getNewById(this.id),e=>{this.renderData(e)})}renderData(e){new a(this.pageRoot).render(e)}get pageRoot(){return document.getElementById("product-page")}getHTML(){return`
                <div id="product-page"></div>
            `}clickBack(){new l(this.parent).render()}render(){this.parent.innerHTML="";const e=this.getHTML();this.parent.insertAdjacentHTML("beforeend",e),new u(this.pageRoot).render(this.clickBack.bind(this)),this.getData()}}let m=[{id:1,src:"https://leonardo.osnova.io/94967adf-4128-5aaa-974f-07f1811300a4",title:"Спрос на дубайский шоколад спровоцировал дефицит фисташек на мировом рынке",text:"В России в преддверии Пасхи тренд получил новый виток, на маркетплейсах продавали «дубайские» куличи. Так называемая дубайская шоколадка — это плитка молочного шоколада с толстыми бортиками и хрустящей начинкой с фисташковой пастой."},{id:2,src:"https://leonardo.osnova.io/b0d65357-df44-5cce-b865-4879884d8af7",title:"Российско-американский экипаж корабля «Союз МС-26» успешно вернулся на Землю с МКС",text:"Спускаемый аппарат корабля «Союз МС-26» приземлился в Казахстане вблизи города Жезказган в 4:20 мск. В нём на Землю вернулись космонавты «Роскосмоса» Алексей Овчинин и Иван Вагнер, а также астронавт NASA Дональд Петтит. Сведение с орбиты и спуск прошли штатно, сообщила пресс-служба «Роскосмоса». Космонавту Алексею Овчинину после приземления вручили пасхальное яйцо в честь праздника."},{id:3,src:"https://leonardo.osnova.io/f6a17835-b862-507d-809f-fa62df3da5e5",title:"В Китае запустили «первую» сеть со скоростью до 10 Гбит/с с технологией 50G PON",text:"Пока широкополосное кабельное подключение работает в районе Сюнъань вблизи Пекина. В будущем в стране появится ещё 168 локаций с 10-гигабитным подключением, пишет китайское издание Mydrivers. Компания использует «первую в мире» технологию 50G PON."},{id:4,src:"https://leonardo.osnova.io/92e17535-3049-5fa3-ae86-e4bf4271855d",title:"50 триллионов инвестиций для девелоперов: как краудлендинг влияет на рынок недвижимости",text:"Для девелоперов открываются большие возможности: привлекать частные инвестиции через коллективное инвестирование. Это когда много людей скидываются на вашу мечту, чтобы потом с гордостью говорить: «Я тоже в этом участвовал!». Согласно анализу BusinesStat, к 2025 году рынок краудфандинга в России вырос в 8 раз. За период с 2020 по 2024 год оборот увеличился с 7 до 53 миллиардов рублей."}];function w(o){if(o){let e=0,n=1;for(let t in o)e+=Number(o[t]),n*=Number(o[t]);return[e,n]}else return 0}function b(o,e){if(o&&e&&o.length===e.length){let n={};for(let t of o)n[t]?n[t]=n[t]+1:n[t]=1;for(let t of e){if(!n[t])return!1;n[t]--}return!0}else return!1}function y(o){const e={};for(let s of o){const r=s.toLowerCase().split("").sort().join("");e[r]||(e[r]=[]),e[r].push(s)}const n=Object.values(e).filter(s=>s.length>=2);for(let s of n)s.sort();n.sort((s,r)=>{const i=s[0].toLowerCase(),h=r[0].toLowerCase();return i.localeCompare(h)});let t="";for(const s of n)t+=`${s.join(", ")}<br>`;return console.log(e),t}class l{constructor(e){this.parent=e,this.searchTerm="",this.now_news=[...m]}getData(){c.get(d.getNews(),e=>{this.renderData(e)})}renderData(e){e.forEach(n=>{new a(this.pageRoot).render(n,this.clickCard.bind(this))})}get pageRoot(){return document.getElementById("main-page")}getHTML(){return`
                <div class="search-container" style="margin-bottom: 20px;">
                    <input type="text" id="search-input" placeholder="Поиск новостей">
                    <button id="search-button">
                        Найти
                    </button>
                </div>

                <div id="main-page" class="d-flex flex-wrap"></div>
            `}handleSearch(){const e=document.getElementById("search-input");if(this.searchTerm=e.value.toLowerCase().trim(),this.searchTerm){const n=this.now_news.filter(t=>t.title.toLowerCase().includes(this.searchTerm)||t.text.toLowerCase().includes(this.searchTerm));this.render(n)}else this.render()}setupSearch(){const e=document.getElementById("search-button"),n=document.getElementById("search-input");e.addEventListener("click",()=>this.handleSearch()),n.addEventListener("keypress",t=>{t.key==="Enter"&&this.handleSearch()})}clickCard(e){let n=e.target.dataset.id;const t=this.now_news;console.log(t);let s=t.find(i=>i.id==n);console.log(s),new g(this.parent,n,s.src,s.title,s.text).render()}deleteCard(e){const n=e.target.dataset.id;this.now_news=this.now_news.filter(t=>Number(t.id)!==Number(n)),this.render()}render(){this.parent.innerHTML="";const e=this.getHTML();this.parent.insertAdjacentHTML("beforeend",e),this.getData(),this.setupSearch(),this.searchTerm&&(this.now_news=this.now_news.filter(s=>s.title.toLowerCase().includes(this.searchTerm)||s.text.toLowerCase().includes(this.searchTerm)));let n=[];this.now_news.forEach(s=>{new a(this.pageRoot),n.push(Number(s.id))});let t=w(n);this.parent.insertAdjacentHTML("beforeend",'<p class="box" style="color: white">Сумма ID: '+t[0]+", произведение ID: "+t[1]+"</p>"),this.parent.insertAdjacentHTML("beforeend",'<p class="box" style="color: white">Схожи ли массивы [1, 2, 3, 8, -2] и [2, 3, 8, 1, -2]: '+b([1,2,3,8,-2],[2,3,8,1,-2])+"</p>"),this.parent.insertAdjacentHTML("beforeend",'<p class="box" style="color: white">Анаграммы для слов:<br><br>'+y(["новости","свиноть","виность","репортаж","жаропете","событие","обвестиё","телевизор","зилотвере","корреспондент"])+"</p>")}}const L=document.getElementById("root"),T=new l(L);T.render();
